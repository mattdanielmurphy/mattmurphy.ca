import { useCallback, useEffect, useState } from "react"

import { createClient } from "@supabase/supabase-js"

const supabaseUrl = "https://mxjkwzbcgefwdwifpgaz.supabase.co"
const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_KEY
const supabase = createClient(supabaseUrl, supabaseKey)

export default function Codes() {
	const [codes, setCodes] = useState([])
	const [connectionError, setConnectionError] = useState(false)
	const [showAll, setShowAll] = useState(false)

	const timeAgo = (dateString) => {
		const now = new Date()
		const createdAt = new Date(dateString)
		const seconds = Math.floor((now - createdAt) / 1000)
		let interval = Math.floor(seconds / 31536000)

		if (interval >= 1) return `${interval} year${interval === 1 ? "" : "s"} ago`
		interval = Math.floor(seconds / 2592000)
		if (interval >= 1) return `${interval} month${interval === 1 ? "" : "s"} ago`
		interval = Math.floor(seconds / 86400)
		if (interval >= 1) return `${interval} day${interval === 1 ? "" : "s"} ago`
		interval = Math.floor(seconds / 3600)
		if (interval >= 1) return `${interval} hour${interval === 1 ? "" : "s"} ago`
		interval = Math.floor(seconds / 60)
		if (interval >= 1) return `${interval} minute${interval === 1 ? "" : "s"} ago`
		return `${seconds} second${seconds === 1 ? "" : "s"} ago`
	}

	const formatCode = (code) => {
		return String(code).padStart(4, "0")
	}

	const getData = useCallback(async () => {
		const { data: rows, error } = await supabase.from("waking-up-login-codes").select("*")
		if (error) {
			console.error("Error fetching data:", error)
			setConnectionError(true)
			return
		}
		const sortedRows = rows.sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
		const formattedData = sortedRows.map((row) => ({
			createdAt: row.created_at,
			code: formatCode(row.code),
		}))

		setCodes(formattedData)
		setConnectionError(false)
	}, [])

	useEffect(() => {
		getData()

		const channel = supabase
			.channel("schema-db-changes")
			.on(
				"postgres_changes",
				{
					event: "INSERT",
					schema: "public",
					table: "waking-up-login-codes",
				},
				(payload) => {
					console.log("Change received!", payload)
					getData()
				}
			)
			.subscribe()

		channel.on("error", () => {
			setConnectionError(true)
		})

		const intervalId = setInterval(() => {
			setCodes((prevCodes) =>
				prevCodes.map((code) => ({
					...code,
					timeAgo: timeAgo(code.createdAt),
				}))
			)
		}, 1000)

		return () => {
			clearInterval(intervalId)
			supabase.removeChannel(channel)
		}
	}, [getData])

	const toggleShowAll = () => {
		setShowAll(!showAll)
	}

	return (
		<div
			style={{
				textAlign: "center",
				display: "flex",
				flexDirection: "column",
				height: "100vh",
				margin: "0 auto",
				padding: "2rem 0",
				maxHeight: "800px",
			}}
		>
			<div
				style={{
					flex: 1,
					display: "flex",
					flexDirection: "column",
					justifyContent: "center",
					alignItems: "center",
					// maxHeight: "400px",
					overflow: "auto",
				}}
			>
				<div style={{ margin: "3rem auto 0 auto" }}>
					{codes.length > 0 ? (
						<>
							<h3 style={{ textAlign: "left", fontSize: "2rem" }}>
								{codes[0].code} <span style={{ color: "grey", fontWeight: "300" }}>{timeAgo(codes[0].createdAt)}</span>
							</h3>
							{codes.length > 1 && (
								<button onClick={toggleShowAll} style={{ margin: "10px 0" }}>
									{showAll ? "Hide" : "Show"} older codes
								</button>
							)}
							{showAll &&
								codes.slice(1).map((code, index) => (
									<h3 key={index} style={{ textAlign: "left", fontSize: "1.5rem" }}>
										{code.code} <span style={{ color: "grey", fontWeight: "300" }}>{timeAgo(code.createdAt)}</span>
									</h3>
								))}
						</>
					) : (
						<h2>Loading codes...</h2>
					)}
				</div>
			</div>

			<footer
				style={{
					padding: "20px",
					width: "100%",
					display: "flex",
					flexDirection: "column",
					alignItems: "center",
				}}
			>
				<div style={{ width: 300, margin: "10px auto" }}>
					<svg fill='none' role='img' viewBox='0 0 438 56' xmlns='http://www.w3.org/2000/svg' aria-hidden='true'>
						<title>Waking Up</title>
						<path
							d='M95.23 1.11l25.47 52.7h-9.17l-5.43-11.6H84.3l-5.43 11.6h-9.1l25.46-52.7zm-7.26 33.32h14.46l-7.19-15.41-7.27 15.41zM131.1 1.69h8.51v26.2l22.94-26.2h10.13l-23.24 26.5L174.9 53.8h-10.71l-24.58-24.59V53.8h-8.51V1.69zm55.45 0h8.51V53.8h-8.51V1.69zm160.27 31.85V1.69h8.51v32.07c0 8.07 5.06 12.55 12.48 12.55 7.41 0 12.4-4.48 12.4-12.55V1.69h8.51v31.85c0 12.84-8.66 20.84-20.92 20.84-12.25.01-20.98-7.99-20.98-20.84zm57.24-31.85h15.56c10.79 0 18.2 6.75 18.2 16.59 0 9.69-7.41 16.59-18.2 16.59h-7.05V53.8h-8.51V1.69zm15.19 25.25c6.24 0 9.91-3.45 9.91-8.66s-3.67-8.66-9.91-8.66h-6.68v17.32h6.68zM.05 1.56h8.73l13.5 31.97L36.04.98l13.7 32.35L62.96 1.56h8.81l-21.7 52.7L36.05 20.5 22.03 54.26.05 1.56zm222.92 19.29V53.8h-8.51V1.1l33.67 33.83V1.68h8.51v52.7l-33.67-33.53zm68.41 10.64h16.52v12.04c-2.94 1.84-6.83 2.79-10.64 2.79-10.28 0-17.98-8.15-17.98-18.57s7.71-18.57 17.98-18.57c4.44 0 8.86 1.56 12.06 4.21l5.82-5.82c-4.69-4.27-11.03-6.47-17.88-6.47-14.75 0-26.64 11.6-26.64 26.64 0 15.04 11.89 26.64 26.64 26.64 7.34 0 14.31-2.5 19.15-6.68V23.26h-21.64l-3.39 8.23z'
							fill='currentColor'
						></path>
					</svg>
				</div>
				<div className='sc-c25633e2-3 isSzYv'>
					<a style={{ border: "none" }} aria-label='Download on the App Store' className='sc-c25633e2-4 esHymA' href='https://wakingup.onelink.me/8fmX' rel='noreferrer' target='_blank'>
						<svg fill='none' height='35.8974358974359' viewBox='0 0 117 40' width='105' xmlns='http://www.w3.org/2000/svg' color='#6f6f6f' className='sc-c25633e2-5 cKFrWc'>
							<path
								d='M.887 4.335c0-1.122 0-1.684.184-2.127A2.41 2.41 0 0 1 2.375.904C2.818.721 3.379.721 4.502.721h108.061c1.123 0 1.684 0 2.127.183.591.245 1.06.714 1.304 1.304.184.443.184 1.005.184 2.127v31.201c0 1.123 0 1.684-.184 2.127a2.406 2.406 0 0 1-1.304 1.304c-.443.184-1.004.184-2.127.184H4.502c-1.123 0-1.684 0-2.127-.184a2.41 2.41 0 0 1-1.304-1.304C.887 37.22.887 36.66.887 35.536v-31.2Z'
								fill='currentColor'
							></path>
							<path
								d='M79.214 19.168v2.201h-1.38v1.444h1.38v4.904c0 1.675.757 2.345 2.663 2.345.335 0 .654-.04.933-.088v-1.427c-.239.023-.39.04-.654.04-.853 0-1.228-.4-1.228-1.308v-4.466h1.882v-1.444h-1.882v-2.201h-1.714ZM87.666 30.181c2.536 0 4.091-1.698 4.091-4.513 0-2.8-1.563-4.506-4.091-4.506-2.536 0-4.1 1.706-4.1 4.506 0 2.815 1.556 4.513 4.1 4.513Zm0-1.523c-1.492 0-2.329-1.092-2.329-2.99 0-1.883.837-2.983 2.329-2.983 1.483 0 2.329 1.1 2.329 2.983 0 1.89-.846 2.99-2.33 2.99ZM93.088 30.014h1.714v-5.128c0-1.22.917-2.042 2.217-2.042.303 0 .814.056.957.104v-1.69c-.183-.049-.51-.072-.765-.072-1.133 0-2.098.622-2.345 1.475h-.128v-1.332h-1.65v8.685ZM102.234 22.621c1.268 0 2.097.885 2.137 2.25h-4.386c.095-1.357.981-2.25 2.249-2.25Zm2.129 5.048c-.319.678-1.029 1.053-2.066 1.053-1.371 0-2.257-.965-2.312-2.488v-.096h6.132v-.598c0-2.727-1.459-4.378-3.875-4.378-2.449 0-4.004 1.762-4.004 4.538 0 2.775 1.523 4.481 4.012 4.481 1.985 0 3.373-.957 3.764-2.512h-1.651ZM67.97 26.807c.132 2.132 1.909 3.496 4.554 3.496 2.827 0 4.596-1.43 4.596-3.711 0-1.794-1.009-2.786-3.456-3.356l-1.314-.322c-1.554-.364-2.182-.852-2.182-1.703 0-1.075.975-1.777 2.438-1.777 1.39 0 2.348.686 2.522 1.785h1.802c-.108-2.009-1.877-3.422-4.299-3.422-2.603 0-4.34 1.413-4.34 3.538 0 1.752.984 2.794 3.142 3.298l1.537.372c1.579.372 2.273.917 2.273 1.827 0 1.058-1.09 1.826-2.579 1.826-1.595 0-2.703-.719-2.86-1.851H67.97ZM50.208 21.186c-1.18 0-2.202.59-2.728 1.579h-.128v-1.436h-1.65v11.572h1.714v-4.203h.136c.454.917 1.435 1.46 2.671 1.46 2.194 0 3.59-1.731 3.59-4.49 0-2.76-1.396-4.482-3.605-4.482Zm-.487 7.432c-1.435 0-2.337-1.132-2.337-2.942 0-1.819.901-2.951 2.345-2.951 1.451 0 2.32 1.108 2.32 2.943 0 1.842-.869 2.95-2.328 2.95ZM59.812 21.186c-1.18 0-2.201.59-2.727 1.579h-.128v-1.436h-1.65v11.572h1.714v-4.203h.135c.455.917 1.436 1.46 2.672 1.46 2.193 0 3.589-1.731 3.589-4.49 0-2.76-1.396-4.482-3.605-4.482Zm-.486 7.432c-1.436 0-2.337-1.132-2.337-2.942 0-1.819.901-2.951 2.345-2.951 1.45 0 2.32 1.108 2.32 2.943 0 1.842-.87 2.95-2.329 2.95ZM42.625 30.014h1.968l-4.307-11.928h-1.992l-4.307 11.928h1.902l1.099-3.166h4.546l1.091 3.166Zm-3.43-9.762h.14l1.728 5.042h-3.604l1.736-5.042ZM35.14 9.09v5.754h2.077c1.714 0 2.707-1.057 2.707-2.895 0-1.81-1-2.86-2.707-2.86h-2.078Zm.892.813h1.085c1.192 0 1.898.758 1.898 2.058 0 1.32-.694 2.07-1.898 2.07h-1.085V9.902ZM42.965 14.927c1.268 0 2.046-.849 2.046-2.257 0-1.4-.782-2.252-2.046-2.252-1.268 0-2.05.853-2.05 2.252 0 1.408.778 2.257 2.05 2.257Zm0-.761c-.746 0-1.164-.547-1.164-1.496 0-.94.418-1.49 1.164-1.49.742 0 1.164.55 1.164 1.49 0 .946-.422 1.496-1.164 1.496ZM51.632 10.501h-.857l-.773 3.314h-.068L49.04 10.5h-.822l-.893 3.314h-.064l-.778-3.314h-.869l1.197 4.343h.88l.894-3.198h.068l.897 3.198h.89l1.191-4.343ZM52.62 14.844h.857v-2.54c0-.678.403-1.101 1.037-1.101.634 0 .937.347.937 1.045v2.596h.857v-2.812c0-1.032-.534-1.614-1.503-1.614-.654 0-1.085.29-1.296.773h-.064v-.69h-.825v4.343ZM57.658 14.844h.858V8.807h-.858v6.037ZM61.74 14.927c1.268 0 2.045-.849 2.045-2.257 0-1.4-.781-2.252-2.045-2.252-1.268 0-2.05.853-2.05 2.252 0 1.408.778 2.257 2.05 2.257Zm0-.761c-.746 0-1.165-.547-1.165-1.496 0-.94.42-1.49 1.165-1.49.742 0 1.164.55 1.164 1.49 0 .946-.422 1.496-1.164 1.496ZM66.34 14.194c-.467 0-.806-.228-.806-.618 0-.383.271-.587.87-.627l1.06-.067v.363c0 .538-.478.949-1.124.949Zm-.22.721c.57 0 1.045-.247 1.304-.681h.068v.61h.826v-2.967c0-.917-.614-1.46-1.703-1.46-.985 0-1.687.479-1.774 1.225h.829c.096-.307.427-.483.905-.483.586 0 .89.26.89.718v.375l-1.177.067c-1.033.064-1.615.515-1.615 1.296 0 .794.61 1.3 1.448 1.3ZM71.227 14.915c.598 0 1.105-.283 1.364-.757h.068v.686h.82V8.807h-.856v2.384h-.064c-.236-.479-.738-.762-1.332-.762-1.097 0-1.802.87-1.802 2.241 0 1.376.697 2.245 1.802 2.245Zm.243-3.716c.718 0 1.168.57 1.168 1.475 0 .91-.446 1.472-1.168 1.472-.725 0-1.16-.555-1.16-1.476 0-.913.439-1.471 1.16-1.471ZM79.04 14.927c1.267 0 2.045-.849 2.045-2.257 0-1.4-.782-2.252-2.046-2.252-1.268 0-2.05.853-2.05 2.252 0 1.408.778 2.257 2.05 2.257Zm0-.761c-.746 0-1.165-.547-1.165-1.496 0-.94.419-1.49 1.164-1.49.742 0 1.165.55 1.165 1.49 0 .946-.423 1.496-1.165 1.496ZM82.22 14.844h.857v-2.54c0-.678.403-1.101 1.037-1.101.634 0 .937.347.937 1.045v2.596h.857v-2.812c0-1.032-.534-1.614-1.503-1.614-.654 0-1.085.29-1.296.773h-.064v-.69h-.825v4.343ZM89.857 9.42v1.101h-.69v.722h.69v2.452c0 .838.378 1.172 1.331 1.172.168 0 .327-.02.467-.043v-.714c-.12.012-.195.02-.327.02-.427 0-.614-.2-.614-.654v-2.233h.941v-.722h-.941v-1.1h-.857ZM92.806 14.844h.857v-2.536c0-.658.39-1.101 1.093-1.101.606 0 .929.35.929 1.045v2.592h.857V12.04c0-1.032-.57-1.618-1.495-1.618-.654 0-1.113.29-1.324.777h-.068V8.807h-.85v6.037ZM99.635 11.147c.634 0 1.048.443 1.068 1.125H98.51c.048-.678.49-1.125 1.125-1.125Zm1.064 2.524c-.159.34-.514.527-1.032.527-.686 0-1.129-.483-1.157-1.245v-.047h3.067v-.3c0-1.363-.73-2.188-1.938-2.188-1.224 0-2.002.88-2.002 2.268s.762 2.241 2.006 2.241c.993 0 1.686-.478 1.882-1.256h-.826ZM24.684 20.225a4.793 4.793 0 0 1 2.264-3.99 4.927 4.927 0 0 0-3.834-2.072c-1.614-.17-3.178.965-4 .965-.838 0-2.104-.949-3.467-.92a5.149 5.149 0 0 0-4.297 2.62c-1.858 3.217-.472 7.945 1.308 10.546.89 1.273 1.93 2.695 3.293 2.645 1.332-.055 1.83-.85 3.439-.85 1.593 0 2.06.85 3.45.818 1.43-.023 2.33-1.28 3.19-2.565.64-.907 1.132-1.91 1.459-2.97a4.635 4.635 0 0 1-2.805-4.227ZM22.06 12.452A4.681 4.681 0 0 0 23.13 9.1a4.763 4.763 0 0 0-3.081 1.594 4.495 4.495 0 0 0-1.1 3.23 3.985 3.985 0 0 0 3.11-1.47Z'
								fill='#F4F4F4'
							></path>
						</svg>
					</a>
					<a style={{ border: "none" }} aria-label='Get it on Google Play' className='sc-c25633e2-4 esHymA' href='https://wakingup.onelink.me/CA3I' rel='noreferrer' target='_blank'>
						<svg fill='none' height='35.07692307692308' viewBox='0 0 130 40' width='114' xmlns='http://www.w3.org/2000/svg' color='#6f6f6f' className='sc-c25633e2-6 jafuar'>
							<path d='M.174 3.13A2.41 2.41 0 0 1 2.584.72h124.882a2.41 2.41 0 0 1 2.41 2.41v33.61a2.41 2.41 0 0 1-2.41 2.41H2.584a2.41 2.41 0 0 1-2.41-2.41V3.13Z' fill='currentColor'></path>
							<path
								d='M65.636 21.618c-2.26 0-4.101 1.719-4.101 4.086 0 2.353 1.842 4.086 4.101 4.086 2.26 0 4.103-1.733 4.103-4.086-.001-2.367-1.843-4.086-4.103-4.086Zm0 6.564c-1.238 0-2.305-1.021-2.305-2.477 0-1.47 1.068-2.477 2.305-2.477 1.239 0 2.306 1.006 2.306 2.477 0 1.455-1.067 2.477-2.306 2.477Zm-8.948-6.564c-2.26 0-4.102 1.719-4.102 4.086 0 2.353 1.842 4.086 4.102 4.086 2.26 0 4.102-1.733 4.102-4.086 0-2.367-1.841-4.086-4.102-4.086Zm0 6.564c-1.239 0-2.306-1.021-2.306-2.477 0-1.47 1.068-2.477 2.306-2.477s2.306 1.006 2.306 2.477c0 1.455-1.068 2.477-2.306 2.477Zm-10.643-5.31v1.734h4.148c-.124.975-.449 1.687-.944 2.182-.604.603-1.548 1.27-3.204 1.27-2.554 0-4.55-2.06-4.55-4.613 0-2.554 1.996-4.613 4.55-4.613 1.377 0 2.383.542 3.126 1.238l1.223-1.223c-1.038-.99-2.414-1.748-4.35-1.748-3.497 0-6.438 2.847-6.438 6.346 0 3.498 2.94 6.345 6.439 6.345 1.887 0 3.312-.62 4.426-1.78 1.145-1.145 1.501-2.756 1.501-4.055 0-.402-.03-.774-.093-1.083h-5.834Zm43.53 1.347c-.34-.913-1.378-2.6-3.499-2.6-2.105 0-3.854 1.655-3.854 4.085 0 2.29 1.734 4.086 4.055 4.086 1.873 0 2.956-1.145 3.406-1.81l-1.393-.93c-.464.681-1.1 1.13-2.013 1.13-.913 0-1.563-.418-1.98-1.238l5.463-2.26-.186-.463Zm-5.573 1.362c-.046-1.58 1.223-2.383 2.137-2.383.712 0 1.315.356 1.517.866l-3.654 1.517Zm-4.441 3.962h1.794v-12.01h-1.794v12.01Zm-2.942-7.011h-.062c-.402-.48-1.177-.914-2.15-.914-2.044 0-3.917 1.796-3.917 4.103 0 2.29 1.873 4.07 3.916 4.07.975 0 1.749-.433 2.151-.928h.062v.588c0 1.563-.836 2.4-2.182 2.4-1.1 0-1.78-.79-2.06-1.456l-1.562.651c.448 1.083 1.64 2.414 3.622 2.414 2.105 0 3.885-1.238 3.885-4.257v-7.336H76.62v.665h-.001Zm-2.058 5.65c-1.239 0-2.275-1.038-2.275-2.461 0-1.44 1.036-2.493 2.275-2.493 1.222 0 2.182 1.052 2.182 2.492 0 1.424-.96 2.462-2.182 2.462Zm23.424-10.649h-4.296v12.01h1.792v-4.55h2.503c1.987 0 3.941-1.438 3.941-3.73 0-2.29-1.953-3.73-3.94-3.73Zm.046 5.788h-2.55v-4.116h2.55c1.34 0 2.101 1.11 2.101 2.059 0 .93-.76 2.058-2.101 2.058Zm11.079-1.724c-1.298 0-2.642.572-3.198 1.839l1.591.664c.34-.664.974-.881 1.638-.881.927 0 1.87.556 1.885 1.545v.123c-.325-.185-1.02-.463-1.869-.463-1.715 0-3.462.943-3.462 2.704 0 1.607 1.407 2.642 2.982 2.642 1.205 0 1.87-.54 2.287-1.175h.061v.927h1.732v-4.605c0-2.13-1.592-3.32-3.647-3.32Zm-.217 6.582c-.586 0-1.405-.294-1.405-1.02 0-.927 1.02-1.283 1.901-1.283.787 0 1.159.17 1.637.402a2.173 2.173 0 0 1-2.133 1.901Zm10.168-6.32-2.055 5.207h-.062l-2.132-5.207h-1.932l3.199 7.278-1.824 4.049h1.87l4.93-11.327h-1.994Zm-16.146 7.684h1.791v-12.01h-1.791v12.01ZM45.731 10.562c0 .805-.238 1.446-.715 1.924-.542.569-1.25.853-2.118.853-.832 0-1.54-.288-2.121-.865-.582-.577-.874-1.292-.874-2.145 0-.854.292-1.569.874-2.145.581-.578 1.29-.866 2.121-.866.413 0 .808.08 1.183.241.375.162.676.376.901.644l-.506.507c-.382-.456-.907-.684-1.579-.684-.607 0-1.132.213-1.575.64-.442.427-.663.98-.663 1.662 0 .681.22 1.236.663 1.662.443.427.968.64 1.575.64.644 0 1.18-.214 1.61-.644.279-.28.44-.668.484-1.167h-2.094v-.693h2.793c.029.151.041.296.041.436ZM50.16 8.154h-2.624V9.98h2.367v.693h-2.367v1.827h2.625v.71h-3.366V7.445h3.366v.708ZM53.284 13.21h-.74V8.154h-1.611v-.708h3.961v.708h-1.61v5.056ZM57.76 13.21V7.446h.74v5.764h-.74ZM61.786 13.21h-.741V8.154h-1.61v-.708h3.96v.708h-1.61v5.056ZM70.894 12.466c-.566.582-1.27.873-2.113.873s-1.547-.291-2.113-.873c-.567-.582-.85-1.295-.85-2.138 0-.842.283-1.555.85-2.138.566-.582 1.27-.874 2.113-.874.837 0 1.54.293 2.11.878.568.585.853 1.296.853 2.134 0 .843-.284 1.556-.85 2.138Zm-3.68-.483c.427.432.949.647 1.567.647.617 0 1.14-.216 1.566-.648.426-.432.64-.983.64-1.654 0-.67-.214-1.222-.64-1.654a2.113 2.113 0 0 0-1.566-.648c-.618 0-1.14.216-1.566.648-.426.432-.64.984-.64 1.654 0 .67.214 1.222.64 1.655ZM72.783 13.21V7.446h.901l2.802 4.484h.032l-.032-1.11V7.445h.74v5.764h-.773l-2.93-4.702h-.033l.032 1.111v3.591h-.739Z'
								fill='#F4F4F4'
							></path>
							<path
								d='M45.731 10.562c0 .805-.238 1.446-.715 1.924-.542.569-1.25.853-2.118.853-.832 0-1.54-.288-2.121-.865-.582-.577-.874-1.292-.874-2.145 0-.854.292-1.569.874-2.145.581-.578 1.29-.866 2.121-.866.413 0 .808.08 1.183.241.375.162.676.376.901.644l-.506.507c-.382-.456-.907-.684-1.579-.684-.607 0-1.132.213-1.575.64-.442.427-.663.98-.663 1.662 0 .681.22 1.236.663 1.662.443.427.968.64 1.575.64.644 0 1.18-.214 1.61-.644.279-.28.44-.668.484-1.167h-2.094v-.693h2.793c.029.151.041.296.041.436ZM50.16 8.154h-2.624V9.98h2.367v.693h-2.367v1.827h2.625v.71h-3.366V7.445h3.366v.708ZM53.284 13.21h-.74V8.154h-1.611v-.708h3.961v.708h-1.61v5.056ZM57.76 13.21V7.446h.74v5.764h-.74ZM61.786 13.21h-.741V8.154h-1.61v-.708h3.96v.708h-1.61v5.056ZM70.894 12.466c-.566.582-1.27.873-2.113.873s-1.547-.291-2.113-.873c-.567-.582-.85-1.295-.85-2.138 0-.842.283-1.555.85-2.138.566-.582 1.27-.874 2.113-.874.837 0 1.54.293 2.11.878.568.585.853 1.296.853 2.134 0 .843-.284 1.556-.85 2.138Zm-3.68-.483c.427.432.949.647 1.567.647.617 0 1.14-.216 1.566-.648.426-.432.64-.983.64-1.654 0-.67-.214-1.222-.64-1.654a2.113 2.113 0 0 0-1.566-.648c-.618 0-1.14.216-1.566.648-.426.432-.64.984-.64 1.654 0 .67.214 1.222.64 1.655ZM72.783 13.21V7.446h.901l2.802 4.484h.032l-.032-1.11V7.445h.74v5.764h-.773l-2.93-4.702h-.033l.032 1.111v3.591h-.739Z'
								stroke='#F4F4F4'
								strokeWidth='0.192'
								strokeMiterlimit='10'
							></path>
							<path
								fillRule='evenodd'
								clipRule='evenodd'
								d='M9.932 8.374a2.32 2.32 0 0 0-.176.939V30.56c0 .367.063.682.176.939l11.562-11.564L9.932 8.374Zm.668 23.817c.429.183.988.125 1.597-.22L25.8 24.24l-3.626-3.625L10.6 32.19Zm16.066-8.442 4.267-2.424c1.342-.764 1.342-2.012 0-2.775l-4.27-2.425-3.81 3.811 3.813 3.813Zm-.869-8.117-13.6-7.728c-.61-.346-1.168-.404-1.597-.22l11.573 11.573 3.625-3.625Z'
								fill='#F4F4F4'
							></path>
						</svg>
					</a>
					<p style={{ marginTop: "20px" }}>(This page updates automatically as new codes are added&mdash;no need to refresh)</p>
					{connectionError && <p style={{ color: "red" }}>Warning: Connection to the database has been lost. Please check your connection.</p>}
				</div>
			</footer>
		</div>
	)
}
